{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/pablo/Dropbox/ASNPORTS/PELICULAS/Flick%20Verse/flick-verse/src/lib/api/tmdb-v4.js"],"sourcesContent":["const API_URL_V4 = \"https://api.themoviedb.org/4\";\nconst API_KEY_V4 = process.env.NEXT_PUBLIC_TMDB_V4_ACCESS_TOKEN;\n\nconst headers = {\n  Authorization: `Bearer ${API_KEY_V4}`,\n  \"Content-Type\": \"application/json;charset=utf-8\",\n};\n\n// ðŸ” AUTENTICACIÃ“N\nexport async function createRequestToken() {\n  const res = await fetch(`${API_URL_V4}/auth/request_token`, {\n    method: \"POST\",\n    headers,\n  });\n  return res.json();\n}\n\nexport async function createAccessToken(request_token) {\n  const res = await fetch(`${API_URL_V4}/auth/access_token`, {\n    method: \"POST\",\n    headers,\n    body: JSON.stringify({ request_token }),\n  });\n  return res.json();\n}\n\n// Devuelve la informaciÃ³n del usuario autenticado con el access_token\nexport async function getUserInfo(accessToken) {\n    const res = await fetch(`https://api.themoviedb.org/4/account`, {\n        headers: {\n        Authorization: `Bearer ${accessToken}`,\n        \"Content-Type\": \"application/json\",\n        },\n    });\n    return res.json();\n}  \n\nexport async function logout(access_token) {\n  const res = await fetch(`${API_URL_V4}/auth/access_token`, {\n    method: \"DELETE\",\n    headers,\n    body: JSON.stringify({ access_token }),\n  });\n  return res.ok;\n}\n\n// ðŸ‘¤ CUENTA (Requiere que uses el `access_token`)\nexport async function getAccountLists(account_id) {\n  const res = await fetch(`${API_URL_V4}/account/${account_id}/lists`, { headers });\n  return res.json();\n}\n\nexport async function getWatchlistMovies(account_id) {\n  const res = await fetch(`${API_URL_V4}/account/${account_id}/watchlist/movies`, { headers });\n  return res.json();\n}\n\nexport async function getWatchlistTVShows(account_id) {\n  const res = await fetch(`${API_URL_V4}/account/${account_id}/watchlist/tv`, { headers });\n  return res.json();\n}\n\n// ðŸ“‹ LISTAS PERSONALIZADAS\nexport async function createList(name, description = \"\", iso_639_1 = \"en\") {\n  const res = await fetch(`${API_URL_V4}/list`, {\n    method: \"POST\",\n    headers,\n    body: JSON.stringify({ name, description, iso_639_1 }),\n  });\n  return res.json();\n}\n\nexport async function getListDetails(list_id) {\n  const res = await fetch(`${API_URL_V4}/list/${list_id}`, { headers });\n  return res.json();\n}\n\nexport async function addItemToList(list_id, media_id, media_type = \"movie\") {\n  const res = await fetch(`${API_URL_V4}/list/${list_id}/items`, {\n    method: \"POST\",\n    headers,\n    body: JSON.stringify({\n      items: [{ media_type, media_id }],\n    }),\n  });\n  return res.json();\n}\n\nexport async function removeItemFromList(list_id, media_id, media_type = \"movie\") {\n  const res = await fetch(`${API_URL_V4}/list/${list_id}/items`, {\n    method: \"DELETE\",\n    headers,\n    body: JSON.stringify({\n      items: [{ media_type, media_id }],\n    }),\n  });\n  return res.json();\n}\n\nexport async function clearList(list_id) {\n  const res = await fetch(`${API_URL_V4}/list/${list_id}/clear`, {\n    method: \"POST\",\n    headers,\n    body: JSON.stringify({ confirm: true }),\n  });\n  return res.json();\n}\n\nexport async function updateList(list_id, name, description, iso_639_1 = \"en\") {\n  const res = await fetch(`${API_URL_V4}/list/${list_id}`, {\n    method: \"PUT\",\n    headers,\n    body: JSON.stringify({ name, description, iso_639_1 }),\n  });\n  return res.json();\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///home/pablo/Dropbox/ASNPORTS/PELICULAS/Flick%20Verse/flick-verse/src/components/ListsDashboard.jsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport {\n  getAccountLists,\n  createList,\n  updateList,\n  getListDetails,\n  getUserInfo,\n} from \"@/lib/api/tmdb-v4\";\n\nexport default function ListsDashboard() {\n  const [accountId, setAccountId] = useState(null);\n  const [accessToken, setAccessToken] = useState(null);\n  const [lists, setLists] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [newList, setNewList] = useState({ name: \"\", description: \"\" });\n  const [editing, setEditing] = useState(null);\n\n  // Obtener el token y accountId al iniciar\n  useEffect(() => {\n    const token = localStorage.getItem(\"tmdb_access_token\");\n    if (token) {\n      setAccessToken(token);\n      getUserInfo(token).then((user) => {\n        setAccountId(user.id);\n        fetchLists(user.id, token);\n      });\n    } else {\n      console.error(\"No hay token guardado en localStorage\");\n      setLoading(false);\n    }\n  }, []);\n\n  // Obtener listas\n  async function fetchLists(id, token) {\n    setLoading(true);\n    const data = await getAccountLists(id, token);\n    setLists(data.results || []);\n    setLoading(false);\n  }\n\n  // Crear nueva lista\n  async function handleCreate(e) {\n    e.preventDefault();\n    if (!accessToken) return;\n    const created = await createList(newList.name, newList.description, \"es\", accessToken);\n    if (created.id) {\n      await fetchLists(accountId, accessToken);\n      setNewList({ name: \"\", description: \"\" });\n    }\n  }\n\n  // Actualizar lista existente\n  async function handleUpdate(e) {\n    e.preventDefault();\n    if (!accessToken) return;\n    const updated = await updateList(editing.id, editing.name, editing.description, \"es\", accessToken);\n    if (updated.success) {\n      setEditing(null);\n      await fetchLists(accountId, accessToken);\n    }\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <form\n        onSubmit={editing ? handleUpdate : handleCreate}\n        className=\"bg-zinc-800 p-4 rounded shadow-md space-y-3\"\n      >\n        <h2 className=\"text-xl font-semibold\">\n          {editing ? \"Editar Lista\" : \"Crear Nueva Lista\"}\n        </h2>\n        <input\n          type=\"text\"\n          placeholder=\"Nombre de la lista\"\n          value={editing ? editing.name : newList.name}\n          onChange={(e) =>\n            editing\n              ? setEditing({ ...editing, name: e.target.value })\n              : setNewList({ ...newList, name: e.target.value })\n          }\n          className=\"w-full p-2 bg-zinc-900 rounded border border-zinc-700\"\n          required\n        />\n        <textarea\n          placeholder=\"DescripciÃ³n\"\n          value={editing ? editing.description : newList.description}\n          onChange={(e) =>\n            editing\n              ? setEditing({ ...editing, description: e.target.value })\n              : setNewList({ ...newList, description: e.target.value })\n          }\n          className=\"w-full p-2 bg-zinc-900 rounded border border-zinc-700\"\n        />\n        <button\n          type=\"submit\"\n          className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded text-white\"\n        >\n          {editing ? \"Guardar cambios\" : \"Crear lista\"}\n        </button>\n      </form>\n\n      <div>\n        <h2 className=\"text-2xl font-bold mb-4\">Listas existentes</h2>\n        {loading ? (\n          <p>Cargando...</p>\n        ) : (\n          <ul className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4\">\n            {lists.map((list) => (\n              <li\n                key={list.id}\n                className=\"bg-zinc-800 p-4 rounded shadow hover:shadow-lg transition\"\n              >\n                <h3 className=\"text-lg font-bold\">{list.name}</h3>\n                <p className=\"text-sm text-zinc-400 mb-2\">{list.description}</p>\n                <p className=\"text-sm\">ðŸŽž {list.item_count} Ã­tems</p>\n                <button\n                  onClick={async () => {\n                    const fullDetails = await getListDetails(list.id, accessToken);\n                    setEditing({ id: list.id, name: fullDetails.name, description: fullDetails.description });\n                  }}\n                  className=\"mt-3 text-blue-400 hover:underline\"\n                >\n                  Editar\n                </button>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}